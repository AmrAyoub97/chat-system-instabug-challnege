# Instabug Backend Challenge

### Description
Itâ€™s required to build a chat system. The system should allow creating new applications where
each application will have a token(generated by the system) and a name(provided by the client).
The token is the identifier that devices use to send chats to that application.
Each application can have many chats. a chat should have a number. Numbering of chats in
each application starts from 1 and no 2 chats in the same application may have the same
number. The number of the chat should be returned in the chat creation request. A chat
contains messages and messages have numbers that start from 1 for each chat. The number of
the message should also be returned in the message creation request. The client should never
see the ID of any of the entities. The client identifies the application by its token and the chat by
its number along with the application token

### Tech Used
* [Ruby](https://www.ruby-lang.org/en/) - Ruby is an interpreted, high-level, general-purpose programming language.
* [Rails](https://rubyonrails.org/) - A web-application framework that includes everything needed to create database-backed web applications.
* [MySql](https://www.mysql.com/) - MySQL is an open-source relational database management system.
* [Elasticsearh](https://www.elastic.co/) - Elasticsearch is a search engine, provides a distributed, multitenant-capable full-text search engine.
* [Redis](https://redis.io/) - Redis is an open source (BSD licensed), in-memory data structure store, used as a database, cache, and message broker.
* [Sidekiq](https://sidekiq.org/) - efficient background processing for Ruby.
* [JWT](https://jwt.io/) - JSON WEB TOKENS allows you to decode, verify and generate tokens.

### System Features
Create, Update and Read (applications, chats, messages), through the endpoints.

### Requirments
* [Docker](https://www.docker.com/)
* API Test Tool, ex:([Postman](https://www.postman.com/))

### Installation
1. make sure that ```docker``` and ```docker-compose``` are installed on your machine.
2. Clone repository ```git clone https://github.com/AmrAyoub97/chat-system-instabug-challnege.git```
3. Open repo root folder ``` cd chat-system-instabug-challnege```
4. From CMD run ```docker-compose build```, This will build an image for our rails app.
5. From CMD run ```docker-compose up -d```, This will pull the required images and run them in docker containers.

### Docker Containers Used
* MySQL
* Redis
* Elasticsearch
* Rails App

### API Description
| Action | Endpoint URL | Verb | Request Header | Request Body | Response |
| ------ | ------------ | ---- | -------------- | ------------ | -------- |
| Create New Application|/applications |POST||```{"name":"app_name"}```|```{"app_token":"***"}```|
| Update Existing Application Name|/applications|PUT|x-app-token|```{"name":"app_name"}```|```{"app_token":"***"}```|
| Read Existing Application |/applications|GET|x-app-token||```{"application":"{}"}```|
| Read All Applications | /applications/list |GET|||```[{},{}]```|
| Create New Chat| /chats |POST|x-app-token||```{"chat_number":"***"}```|
| Read Existing Chat|  /chats/:id |GET|x-app-token||```{"chat_number":"","messages_count":""}```|
| Read All Chats |/chats |GET|x-app-token||```[{"chat_number":"","messages_count":""}]```|
| Create New Message|/chats/:chat_id/messages|POST|x-app-token|```{"body:"***"}```|```{"message_number":""}```|
| Read Existing Message|/chats/:chat_id/messages/:id|GET|x-app-token||```{"message_number":"","body":""}```|
| Read All Messages |/chats/:chat_id/messages|GET|x-app-token||```[{"message_number":"","body":""}]```|
| Search In App Messages |/search?query=""|GET|x-app-token||```[{"chat_number":"","message_number":"","body":""}]```|

